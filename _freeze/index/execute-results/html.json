{
  "hash": "673e612689c71aa963d3a9fdd1a31c2e",
  "result": {
    "markdown": "---\ntitle: \"Dallas Dog - write-up\"\nformat: html\neditor: visual\nnames: Jefferson Ratliff, Evi Jonas, Sydney Stitt\n---\n\n::: {.cell}\n\n```{.r .cell-code}\n# Do not modify this chunk.\n#install.packages(\"tmap\")\n\nknitr::opts_chunk$set(echo = TRUE, warning = FALSE, message = FALSE)\nlibrary(ggplot2)\nlibrary(dplyr)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n\nAttaching package: 'dplyr'\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nThe following objects are masked from 'package:stats':\n\n    filter, lag\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nThe following objects are masked from 'package:base':\n\n    intersect, setdiff, setequal, union\n```\n:::\n\n```{.r .cell-code}\nlibrary(readr)\nlibrary(lubridate)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n\nAttaching package: 'lubridate'\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nThe following objects are masked from 'package:base':\n\n    date, intersect, setdiff, union\n```\n:::\n\n```{.r .cell-code}\nlibrary(tmap)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nBreaking News: tmap 3.x is retiring. Please test v4, e.g. with\nremotes::install_github('r-tmap/tmap')\n```\n:::\n\n```{.r .cell-code}\nlibrary(sf)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nLinking to GEOS 3.10.2, GDAL 3.4.2, PROJ 8.2.1; sf_use_s2() is TRUE\n```\n:::\n:::\n\n\nIntroduction:\n\nOur data set we chose collected data across a period of one year between 2016-2017. The data is collected to keep citizens informed about the operation and activities of the shelters across the city. This data set uses information from a variety of different animal shelters across the City of Dallas, upon their intake to the shelter. Each observation/row is an individual animal entered by staff into the shelter system. There are 34819 observations. The data is across all animal types including dogs, cats and other wildlife.\n\nWe chose this data set because we are dog lovers and one of our group members is from Dallas and volunteered at a local shelter. It also seemed to have well collected data with a lot of diversity within key variables like dog breed and intake form.\n\n**Question 1:** Which city council districts have the highest rate of adoption?\n\nIntroduction:\n\nThe question at hand involves investigating the adoption rates across various city council districts, specifically focusing on the variables council_district and outcome_type. To address this query effectively, it is crucial to filter the data set using the dplyr package to isolate observations related to adoptions. By narrowing down the data set to only include these instances, we can then proceed to quantify the number of adoptions in each city council district. To visually represent this information, the ggplot2 package will be employed to create a bar graph, offering a clear and concise presentation of the adoption rates across different districts.\n\nTo accomplish this analysis, the data set needs to include relevant information such as council_district and outcome_type. The data set should be pre-processed using dplyr functions to filter and extract the necessary observations related to adoptions. The quantification process involves counting the number of adoption instances within each city council district. Finally, the visualization aspect will be addressed using ggplot2 to generate a bar graph that illustrates the variations in adoption rates across different districts. My interest in this question is driven by the need to understand the geographical distribution of adoption rates within a city, which can have implications for resource allocation, community outreach, and policy planning to enhance animal welfare and adoption initiatives.\n\nApproach:\n\nTo comprehensively address the question of dog adoption rates across city council districts, a combination of visualizations has been employed. The initial bar plot succinctly illustrates the raw counts of adoptions in each district, providing a quick overview of the districts with higher adoption rates. Building upon this, a box plot offers a more detailed perspective, showcasing the distribution of adoption rates within each district. This plot is instrumental in identifying any potential variations, outliers, or skewness in the adoption data. Finally, a faceted bar plot takes the analysis a step further by presenting individual bar plots for each council district. This approach allows for a nuanced examination of adoption patterns in each district while maintaining a clear comparative framework. Together, these visualizations offer a comprehensive understanding of the adoption landscape, enabling insights into both the overall trends and the variability within specific city council districts.\n\nAnalysis:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nreadr::read_csv(\"data/week18_dallas_animals.csv\") %>%\n  head(n = 5)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 5 × 13\n  animal_id animal_type animal_breed   month  year census_tract council_district\n  <chr>     <chr>       <chr>          <chr> <dbl> <chr>        <chr>           \n1 A0979593  DOG         RHOD RIDGEBACK FEB    2017 1502         2               \n2 A0743013  DOG         YORKSHIRE TERR NOV    2016 13609        11              \n3 A1004433  BIRD        CHICKEN        AUG    2017 10803        3               \n4 A0969724  DOG         GERM SHEPHERD  DEC    2016 7102         2               \n5 A0981479  DOG         GERM SHEPHERD  FEB    2017 6001         4               \n# ℹ 6 more variables: intake_type <chr>, intake_date <chr>, outcome_type <chr>,\n#   outcome_date <chr>, chip_status <chr>, animal_origin <chr>\n```\n:::\n\n```{.r .cell-code}\ndog <- read_csv(\"data/week18_dallas_animals.csv\")\n\n#finding number of total adoptions per district in the data frame\ndog_adoptions <- dog %>%\n  filter(outcome_type == \"ADOPTION\") %>% \n  group_by(council_district) %>% \n  summarize(\n    n_adoptions = n()\n  )\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Now let's create the plot\nggplot(data = dog_adoptions, aes(x = council_district, y = n_adoptions)) +\n  geom_bar(stat = \"identity\") +\n  labs(x = \"Council District\", y = \"Number of Adoptions\") +\n  ggtitle(\"Dog Adoptions by Council District\")\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n#trying to make a map\ndallas_districts <- st_read(\"data/Councils/Councils.shp\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nReading layer `Councils' from data source \n  `/Users/sydneystitt/Desktop/MATH241/project01-dog/data/Councils/Councils.shp' \n  using driver `ESRI Shapefile'\nSimple feature collection with 14 features and 6 fields\nGeometry type: POLYGON\nDimension:     XY\nBounding box:  xmin: 2430146 ymin: 6909399 xmax: 2592859 ymax: 7061339\nProjected CRS: NAD83 / Texas North Central (ftUS)\n```\n:::\n\n```{.r .cell-code}\nggplot()+\n  geom_sf(data = dallas_districts)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n\n```{.r .cell-code}\n#joining the adoption data to the shape file\nadoptions_map <- dallas_districts %>%\n  st_transform (4326) %>%\n  inner_join(dog_adoptions, by = c(\"DISTRICT\" = \"council_district\"))\n\n#making a choropleth map of dog adoptions by district\ntm_shape(adoptions_map) + \n  tm_polygons(col = \"n_adoptions\", \n              style = \"quantile\", \n              palette = \"BuGn\", \n              title = \"adoptions by council district\") + \n  tm_layout( \n            main.title.position = \"center\", \n            legend.outside = TRUE)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-4-2.png){width=672}\n:::\n:::\n\n\nDiscussion:\n\nThere appears to be a wide array of differences in of adoptions by council district with districts 1, 4, 6, and 8 making up the largest four. Districts 10-14 make up the least amount of adoptions. We were able to find such a wide difference by council district reveling to us that geography is a major factor in pet adoption in the City of Dallas. Our visualization provides a clear understanding and answer to our research question.\n\n**Question 2:** What types of animal intake tend to stay longer in shelters?\n\nIntroduction:\n\nThis question aims to investigate the factors influencing the duration of stay for animals in shelters, with a specific focus on different types of animal intake. To answer this query effectively, a new variable representing the duration of stay will be created using the dplyr package. Subsequently, a bar graph with error bars will be generated using ggplot2 to visually represent the average stay duration for each type of animal intake. This analysis is motivated by the need to understand the patterns in shelter stay durations, which can inform shelter management strategies and improve the overall welfare of animals in these facilities.\n\nTo address this question, the dataset should include relevant variables such as animal intake type and potentially other factors affecting stay duration. The dplyr package will be utilized to mutate a new variable indicating the duration of stay. The subsequent ggplot2 bar graph will display the average stay duration on the y-axis and different types of animal intake on the x-axis, with error bars providing insights into the variability around the average stay durations. This approach allows for a comprehensive visualization of how various animal intake types correlate with the average duration of stay in shelters, offering valuable insights for shelters to optimize their practices and enhance the overall well-being of sheltered animals.\n\nApproach:\n\nTo address the inquiry regarding the factors influencing the duration of stay for animals in shelters, a systematic approach involving the dplyr and ggplot2 packages is employed. Firstly, a new variable representing the duration of stay is introduced using the dplyr package. This step allows for the transformation of the data set to include a critical metric—stay duration—essential for subsequent analysis. The ggplot2 package is then leveraged to create a visually informative bar graph. This graph employs the average stay duration as the y-axis variable and different types of animal intake as categorical variables along the x-axis. Including error bars in the visualization provides a measure of variability around the mean stay duration for each intake type, offering a more comprehensive understanding of the data distribution. This meticulous approach not only captures the central tendencies in shelter stay duration but also provides insights into the potential variations and uncertainties associated with each animal intake category.\n\nAnalysis:\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#Making a duration variable using dplyr\ndog_duration <- dog %>%\n   mutate(intake_date = mdy(intake_date),\n         outcome_date = mdy(outcome_date)) %>%\n  mutate(duration = difftime(outcome_date, intake_date, units = \"days\")) %>%\n  mutate(duration = as.vector(duration))\n\n#Getting summary statistics for average duration\ndog_duration_summary <- dog_duration %>%\n  group_by(intake_type) %>%\n  summarize(average_duration = mean(duration, na.rm = TRUE),\n            sd_duration = sd(duration, na.rm = TRUE),\n            count_types = n()) \n\n#Graphing violin plot (all data)\nggplot(dog_duration, aes(x = intake_type, y = duration)) +\n  geom_violin() +\n  theme_minimal(base_size = 8) +\n  labs(x = \"Intake Type\", \n       y = \"Duration of Stay\", \n       title = \"Shelter Intake Types and Durations in Dallas Animal Shelters in 2016 and 2017\")\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n\n```{.r .cell-code}\n#Graphing bar graph, sd is larger than mean which means there is abnormal distributions\nggplot(dog_duration_summary) +\n  geom_bar(aes(x = intake_type, y = average_duration), \n           stat = \"identity\") +\n  geom_errorbar(aes(x = intake_type, \n                    ymin = average_duration - sd_duration, \n                    ymax = average_duration + sd_duration)) +\n    labs(x = \"Intake Type\", \n       y = \"Duration of Stay with Error Bars\", \n       title = \"Shelter Intake Types and Durations in Dallas Animal Shelters in 2016 and 2017\")\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-5-2.png){width=672}\n:::\n\n```{.r .cell-code}\n#Graphing histograms, y scale is messed up because stray has many more observations than other groups\nggplot(dog_duration, aes(x = duration)) +\n  geom_histogram() +\n  facet_wrap(~intake_type) +\n  labs(x = \"Intake Type\", \n       y = \"Duration of Stay\", \n       title = \"Shelter Intake Duration Distrib in Dallas Animal Shelters in 2016 and 2017\")\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-5-3.png){width=672}\n:::\n:::\n\n\nDiscussion:\n\nOur data found that \"Owner Surrender\" and \"stray\" are by far the most common with \"stray\" having a significant higher share of the intake forms. This means that a large plurality of shelter animals in Dallas are strays from the street rather than from individual owners or confiscations. It is also apparent from our data that \"Foster\", \"Wildlife\", \"Owner Surrender\", and \"Stray\" are the intake categories that have the lowest duration of stays out of the other intake options. Found and Lost Report in take forms have the largest average stays.\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}